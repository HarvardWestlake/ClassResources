<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Rhythm Practice</title>
    <meta name="theme-color" content="#f2f0ec" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="container">
        <div class="sidebar">
            <div class="card">
                <div class="title">Performance</div>
                <div class="stats">
                    <div class="stat">
                        <div class="label">Accuracy</div>
                        <div class="value" id="stat-acc">0%</div>
                    </div>
                    <div class="stat">
                        <div class="label">Hits</div>
                        <div class="value" id="stat-hits">0</div>
                    </div>
                    <div class="stat">
                        <div class="label">Misses</div>
                        <div class="value" id="stat-miss">0</div>
                    </div>
                    <div class="stat">
                        <div class="label">Combo</div>
                        <div class="value" id="stat-combo">0</div>
                    </div>
                </div>
                <div class="subtitle" style="margin-top:10px;">Timing feedback</div>
                <div class="feedback" id="timingFeedback"></div>
                <div class="subtitle" style="margin-top:10px;">Progress</div>
                <div class="meter">
                    <div class="fill" id="progressFill"></div>
                </div>
                <div class="subtitle" style="margin-top:10px;">Legend</div>
                <div class="legend">
                    <div><span class="dot" style="background:var(--text)"></span> Pending</div>
                    <div><span class="dot" style="background:var(--good)"></span> Good</div>
                    <div><span class="dot" style="background:var(--bad)"></span> Miss</div>
                    <div><span class="dot" style="background:var(--warn)"></span> Early/Late</div>
                </div>
                <div class="actions" style="margin-top:10px;">
                    <button id="reset" class="btn btn--outline">Reset Score</button>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="card">
                <div class="title">Rhythm Reading</div>
                <div class="subtitle">Practice sight-reading rhythms</div>
                <div id="practiceHint" class="practice-hint" style="display:none;">Press ESC to end practice</div>
                <div class="canvas-wrap">
                    <canvas id="sheet"></canvas>
                    <div class="start-overlay" id="startOverlay">
                        <div class="start-content">
                            <div class="start-bar">
                                <div class="sb-left">
                                    <div>
                                        <label class="control-label" for="bpm">BPM</label>
                                        <div class="range-wrap">
                                            <input id="bpm" type="range" min="30" max="240" step="1" value="100" />
                                            <div class="range-value"><span id="bpmVal">100</span></div>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="control-label" for="measures">Measures</label>
                                        <input id="measures" type="number" min="1" max="32" step="1" value="4"
                                            style="display:none;" />
                                        <div id="measuresGroup" class="pill-group"></div>
                                    </div>
                                </div>
                                <div class="bar-sep"></div>
                                <div class="sb-right">
                                    <div>
                                        <label class="control-label" for="timeSig">Time Signature</label>
                                        <select id="timeSig" style="display:none;">
                                            <option value="4/4">4/4</option>
                                            <option value="3/4">3/4</option>
                                            <option value="2/4">2/4</option>
                                            <option value="6/8">6/8</option>
                                        </select>
                                        <div id="timeSigGroup" class="pill-group"></div>
                                    </div>
                                    <div>
                                        <label class="control-label" for="difficulty">Difficulty</label>
                                        <select id="difficulty" style="display:none;">
                                            <option value="easy">Easy</option>
                                            <option value="medium">Medium</option>
                                            <option value="hard">Hard</option>
                                        </select>
                                        <div id="difficultyGroup" class="pill-group"></div>
                                    </div>
                                    <div>
                                        <label class="switch">
                                            <input id="metronome" type="checkbox" checked />
                                            <span>Metronome</span>
                                        </label>
                                        <label class="switch" style="margin-left:10px;">
                                            <input id="beatMarker" type="checkbox" checked />
                                            <span>Beat marker</span>
                                        </label>
                                        <label class="switch" style="margin-left:10px;">
                                            <input id="guideClicks" type="checkbox" checked />
                                            <span>Guide clicks</span>
                                        </label>
                                    </div>
                                    <div>
                                        <button id="openTutorials" class="btn">Tutorials</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="start-hint-wrap">
                            <div id="startHint" class="start-hint">press space or tap to start</div>
                        </div>
                    </div>
                    <div class="summary-overlay" id="summaryOverlay">
                        <div class="summary-card">
                            <div class="title">Session Summary</div>
                            <div class="subtitle">Timing offsets per note (ms)</div>
                            <div id="timingChart" style="width:100%;height:160px;"></div>
                            <div class="summary-grid">
                                <div class="summary-stat">
                                    <div class="label">Accuracy</div>
                                    <div class="value" id="sum-acc">0%</div>
                                </div>
                                <div class="summary-stat">
                                    <div class="label">Combo Max</div>
                                    <div class="value" id="sum-combo">0</div>
                                </div>
                                <div class="summary-stat">
                                    <div class="label">Hits</div>
                                    <div class="value" id="sum-hits">0</div>
                                </div>
                                <div class="summary-stat">
                                    <div class="label">Misses</div>
                                    <div class="value" id="sum-miss">0</div>
                                </div>
                            </div>
                            <div class="summary-actions">
                                <button id="summaryContinue" class="btn btn--outline">Continue</button>
                                <button id="summaryRetry" class="btn">Retry</button>
                            </div>
                        </div>
                    </div>
                    <div class="summary-overlay" id="tutorialsOverlay" style="display:none;">
                        <div class="summary-card">
                            <div class="title">Rhythm Tutorials</div>
                            <div class="subtitle">Single-measure demos. Press Play to watch and listen.</div>
                            <div class="summary-actions" style="justify-content: flex-end; margin-bottom: 8px;">
                                <button id="tutorialsBack" class="btn btn--outline">Back</button>
                            </div>
                            <div id="tutorialList"></div>
                        </div>
                    </div>
                    <div class="countin-overlay" id="countInOverlay">
                        <div class="countin-number" id="countInNumber"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="/src/main.js"></script>
</body>

</html>